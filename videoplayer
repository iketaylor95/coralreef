<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360Â° Ocean Adventure</title>
    <!-- Adding a friendly, rounded font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Basic styles to make the video fill the entire screen */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: 'Nunito', sans-serif;
            color: white;
        }
        /* The container for the YouTube player */
        #player-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Initially disable clicks on the iframe */
        }
        iframe {
            width: 100%;
            height: 100%;
        }
        /* Simple overlay to handle browser autoplay policies (muting) */
        #unmute-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            cursor: pointer;
            z-index: 100;
            transition: opacity 0.5s;
        }
        .unmute-button {
            background-color: #3498db;
            border: none;
            color: white;
            padding: 20px 40px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 24px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
        }
         .unmute-text {
            font-size: 1.5em;
            margin-top: 20px;
            text-shadow: 2px 2px 4px #000;
         }

        /* UPDATED: Scavenger hunt bar styles for the image */
        #scavenger-hunt {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 700px; /* Max width of the image */
            z-index: 50;
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* Standard syntax */
        }
        #scavenger-hunt img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        /* UPDATED: Renamed and resized to cover the entire top bar */
        #top-bar-blocker {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;  /* Tall enough to cover all buttons */
            z-index: 5; /* Must be above the iframe but below other UI */
        }

    </style>
</head>
<body>

    <!-- This overlay prompts the user to click to start with sound -->
    <div id="unmute-overlay">
        <button class="unmute-button">Start Ocean Adventure</button>
        <p class="unmute-text">Click anywhere to begin!</p>
    </div>

    <!-- This div is where the YouTube video player will be inserted by the script -->
    <div id="player-container"></div>
    
    <!-- UPDATED: This invisible div now covers the entire top bar -->
    <div id="top-bar-blocker"></div>

    <!-- UPDATED: Scavenger hunt bar now uses your image embedded directly -->
    <div id="scavenger-hunt">
       <!-- Your scavenger hunt image is now embedded directly in the code to prevent broken links -->
       <img src="https://drive.google.com/uc?export=view&id=1VWYM5skHiI2ZbNVm33mac3-rTFGc2Nsf" alt="Scavenger hunt: find sea turtle, table coral, angelfish, sea anemone, branching coral, kelp, jellyfish">
    </div>


    <script>
        // 1. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;

        // 2. This function creates an <iframe> (and YouTube player) after the API code downloads.
        function onYouTubeIframeAPIReady() {
            // The video ID you'd like to use
            const videoId = 'XEkUy7a8vfI'; 

            player = new YT.Player('player-container', {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,       // Autoplay the video
                    'controls': 0,       // Hide player controls
                    'showinfo': 0,       // Hide video title and uploader
                    'rel': 0,            // Do not show related videos at the end
                    'modestbranding': 1, // Hide YouTube logo
                    'loop': 1,           // Loop the video
                    'playlist': videoId, // The 'loop' parameter requires a 'playlist' of one video
                    'playsinline': 1,    // Important for iOS playback
                    'mute': 1            // Mute is required for autoplay in most modern browsers
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 3. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            // NEW: Set video quality to HD 1080p
            event.target.setPlaybackQuality('hd1080');

            // We have the player muted by default. The overlay will unmute it.
            event.target.playVideo();
            // Allow mouse/touch events for 360 navigation once ready
            document.getElementById('player-container').style.pointerEvents = 'auto';
        }

        // 4. This function is the key to solving the pausing and looping issue.
        // It's called whenever the player's state changes (playing, paused, etc.)
        function onPlayerStateChange(event) {
            // If the video is PAUSED by a user tap...
            if (event.data === YT.PlayerState.PAUSED) {
                // ...immediately tell it to play again!
                player.playVideo();
            }
            // As a backup, if the video ENDS for any reason...
            if (event.data === YT.PlayerState.ENDED) {
                // ...play it from the beginning to ensure it loops.
                player.playVideo();
            }
        }
        
        // 5. Handle unmuting and hiding the overlay
        const unmuteOverlay = document.getElementById('unmute-overlay');
        unmuteOverlay.addEventListener('click', function() {
            if (player && typeof player.unMute === 'function') {
                player.unMute();
            }
            // Fade out and remove the overlay
            unmuteOverlay.style.opacity = '0';
            setTimeout(() => {
                unmuteOverlay.style.display = 'none';
            }, 500); // Match the CSS transition duration
        });

    </script>
</body>
</html>



